# YouGile-Plugins Platform
___
## Priority plugin
___
___
### Description

Плагин, устанавливающий для родительской задачи максимальный из приоритетов дочерних задач.
___
### Before using

Для запуска плагина необходим `YouGile Plugins Manager`.

___
### Configuration

Настройки для плагина должны указываться в конфиг-файле `priority.config.json`.

Все параметры являются обязательными.

`token`:
Токен для доступа к YouGile API

[создать токен](https://en.yougile.com/api-v2#/operations/AuthKeyController_create)

`requestFrequency`: частота запросов в минуту.
Необходимо указать натуральное число - сколько запросов в минуту может отправлять плагин.

`priorityStickerId`: ID стикера, который используется для приоритизации задач.

`delayedState` ID состояния для стикера-приоритета, которое будет использоваться для маркирования отложенных задач.

`priorityOrder`: Порядок приоритета для состояний. Используются в сортировке типа Rank 
(чем меньше значение - тем выше приоритет).

- `stateId`: ID состояния, которое будет участвовать в приоритизации.
- `order`: Rank - место в рейтинге приоритета.

Узнать ID стикера и ID состояний можно в [json с задачей](https://ru.yougile.com/api-v2#/operations/TaskController_search)

`columnIds`:
IDs обрабатываемых колонок с задачами.

[получить список колонок](https://en.yougile.com/api-v2#/operations/ColumnController_search)

!
> Yougile REST API допускает максимально 50 запросов в минуту для одной компании.
>
> Соответственно, суммарная частота всех запущенных плагинов не должна превышать 50
> во избежание временной блокировки запросов со стороны YouGile.
>
> Рекомендуется рассчитывать нагрузку (сколько задач в минуту необходимо обрабатывать для комфортной работы)
> и устанавливать минимально необходимую частоту.
> В дальнейшем можно повысить частоту запросов в конфиг-файле.

Пример файла-конфига:
```json
{
  "token": <строка: токен для доступа к yougile api>,
  "requestFrequency": <целое число: частота запросов в минуту>,
  "priorityStickerId": <строка: ИД стикера-приоритета>,
  "delayedState": <строка: ИД состояния "Отложено">,
  "columnIds": [
    <строка: ИД обрабатываемых колонок>
  ],
  "priorityOrder": [
    {
      "stateId": <строка: ИД состояния приоритета>,
      "order": <целое число: порядок приоритета>
    },
    {
      "stateId": <строка: ИД состояния приоритета>,
      "order": <целое число: порядок приоритета>
    }
  ]
}
```
___
### Usage

#### Скачать готовый архив:
- Скачать архив с последней версией из [релизов](https://github.com/PatBatTB/yougile-plugins-priority/releases).
- Распаковать
- Указать значения для параметров в `priority.config.json` согласно секции Configuration.
- Скопировать jar-файл и `priority.config.json` в папку с плагинами `YouGile Plugins Manager`

#### Собрать из исходников:
- Клонировать текущий репозиторий
- Создать и заполнить `priority.config.json` согласно секции Configuration.
- Собрать проект `mvn clean package`
- Скопировать jar-файл и `priority.config.json` в папку с плагинами `YouGile Plugins Manager`

  (jar-файл необходимо брать "толстый" с суффиксом `-full`)
___